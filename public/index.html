<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RR — Elegí tu servicio</title>
  <link rel="stylesheet" href="/style.css" />
  <link rel="stylesheet" href="/rr-overrides.css" />
</head>
<body>
  <header class="brand">
    <div class="brand__bar"></div>
    <div class="brand__wrap container">
      <a href="/" class="brand__home" aria-label="Ir al inicio">
        <img src="/logo.png" alt="RR" class="brand__logo" />
      </a>
      <div class="brand__text">
        <h1>RR</h1>
        <p>Privado, seguro y de confianza</p>
      </div>
    </div>
    <div class="brand__bar brand__bar--bottom"></div>
  </header>

  <main class="container">
    <section class="card" style="text-align:center; padding:28px">
      <h2>¿Qué servicio necesitás?</h2>
      <p class="muted">Elegí una opción para continuar</p>

      <div class="options-stack">
        <a class="btn-option" href="/cadeteria.html">Cadetería</a>
        <a class="btn-option" href="/transporte.html">Transporte / Remis</a>
        <button id="installBtn" class="btn-option" onclick="installPWA()">Instalar APP</button>
      </div>
    </section>

    <footer>
      <small>© RR — Contacto: <a href="mailto:contacto@rr-raab.com">contacto@rr-raab.com</a></small>
    </footer>
  </main>

  <script>
    // Registrar Service Worker
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("/sw.js");
      });
    }

    // Lógica del botón "Instalar"
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      const btn = document.getElementById('installBtn');
      if (btn) btn.style.display = 'inline-block';
    });

    async function installPWA() {
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      await deferredPrompt.userChoice;
      deferredPrompt = null;
      const btn = document.getElementById('installBtn');
      if (btn) btn.style.display = 'none';
    }
    window.installPWA = installPWA;
  </script>
</body>
</html>
